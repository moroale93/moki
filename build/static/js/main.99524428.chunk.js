(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{293:function(e,t,a){e.exports=a(678)},672:function(e,t,a){},673:function(e,t,a){},674:function(e,t,a){},675:function(e,t,a){},676:function(e,t,a){},678:function(e,t,a){"use strict";a.r(t);a(294),a(345);var r=a(0),n=a.n(r),o=a(132),c=a.n(o),i=a(56),l=a(138),s=a(73),d=a(46),p=a(288),m=(a(540),a(289)),u=a(57),E=a(58),v=a(60),h=a(59),f=a(61),g=function(e){return function(t){t({type:"HTTP_ERROR",payload:e}),setTimeout(function(){t({type:"HTTP_ERROR",payload:null})},5e3)}},y=function(e){return function(t){t({type:"CHANGE_LOADING_PROJECTS",payload:!0}),fetch("/projects").then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){t({type:"UPDATE_PROJECTS",payload:e})}).catch(function(){t(g("Errore inaspettato..."))}).finally(function(){t({type:"CHANGE_LOADING_PROJECTS",payload:!1}),e&&e()})}},j=function e(t){return function(a,r){r().projectData.projects.length?(a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:t,loading:!0}}),fetch("/projects/"+t+"/services").then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){a({type:"UPDATE_SERVICES",payload:{idProject:t,services:e}})}).catch(function(){a(g("Errore inaspettato..."))}).finally(function(){a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:t,loading:!1}})})):a(y(function(){a(e(t))}))}},b=a(16),N=a(20),O=(a(672),N.object().shape({name:N.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),baseEndpoint:N.string().min(2,"Too Short!").required("Required")})),S=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).onDelete=function(e){return function(){a.props.deleteProject(e.id)}},a.onViewServices=function(e){return function(){a.props.history.push("/"+e.id)}},a.onAddProject=function(e,t){var r=t.setSubmitting;a.props.addProject(e),e.name="",e.baseEndpoint="",r(!1)},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.updateProjects()}},{key:"render",value:function(){var e=this,t=this.props.projects.map(function(t,a){return n.a.createElement("li",{key:a},n.a.createElement("div",null,t.name),n.a.createElement("div",null,"/",t.baseEndpoint),n.a.createElement("div",null,n.a.createElement("button",{onClick:e.onDelete(t)},"Delete")),n.a.createElement("div",null,n.a.createElement("button",{onClick:e.onViewServices(t)},"View services")))}),a=this.props,r=a.updateProjects,o=a.loading,c=a.error;return n.a.createElement("div",{className:"App"},n.a.createElement(b.c,{initialValues:{name:"",baseEndpoint:""},validationSchema:O,onSubmit:this.onAddProject},function(e){var t=e.isSubmitting,a=e.errors,r=e.touched;return n.a.createElement(b.b,null,n.a.createElement(b.a,{type:"text",name:"name",placeholder:"Project name",autoComplete:"off"}),a.name&&r.name?n.a.createElement("div",{className:"val-error"},a.name):null,n.a.createElement(b.a,{type:"text",name:"baseEndpoint",placeholder:"Base endpoint",autoComplete:"off"}),a.baseEndpoint&&r.baseEndpoint?n.a.createElement("div",{className:"val-error"},a.baseEndpoint):null,n.a.createElement("button",{type:"submit",disabled:t},"Add project"),n.a.createElement("div",{className:"clearfix"}))}),n.a.createElement("button",{className:"refresh",onClick:r},"Refresh"),n.a.createElement("div",{className:"clearfix"}),n.a.createElement("div",{className:"post-wrapper"},o&&n.a.createElement("div",{className:"loading"},n.a.createElement("div",{className:"lds-ripple"},n.a.createElement("div",null),n.a.createElement("div",null))),(t.length?n.a.createElement("ul",null,t):null)||!o&&n.a.createElement("h2",null,"No projects")),n.a.createElement("div",{className:"toast"+(c?" show":"")},n.a.createElement("div",{className:"img"},n.a.createElement("i",{className:"fas fa-exclamation-triangle"})),n.a.createElement("div",{className:"desc"},c)))}}]),t}(r.Component),C={updateProjects:y,deleteProject:function(e){return function(t){t({type:"CHANGE_LOADING_PROJECTS",payload:!0}),fetch("/projects/"+e,{method:"DELETE"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(){t({type:"DELETE_PROJECTS",payload:{idProject:e}}),t(y())}).catch(function(){t(g("Errore inaspettato..."))}).finally(function(){t({type:"CHANGE_LOADING_PROJECTS",payload:!1})})}},addProject:function(e){return function(t){t({type:"CHANGE_LOADING_PROJECTS",payload:!0}),fetch("/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(){t({type:"ADD_PROJECT",payload:e}),t(y())}).catch(function(){t(g("Errore inaspettato..."))}).finally(function(){t({type:"CHANGE_LOADING_PROJECTS",payload:!1})})}}},T=Object(d.b)(function(e){return{projects:e.projectData.projects,loading:e.projectData.loadingProjects,error:e.appData.error}},C)(S),D=a(292),P=(a(673),N.object().shape({description:N.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),endpoint:N.string().min(2,"Too Short!").required("Required"),method:N.string().oneOf(["GET","POST","DELETE","PUT"],"Insert a valid method!").required("Required"),successBody:N.string().min(2,"Too Short!"),respError:N.boolean(),errorCode:N.number().positive("The code must be positive!").required("Required"),errorBody:N.string().min(2,"Too Short!")})),R=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},A=function(e){var t=e.field,a=e.form,r=a.touched,o=(a.errors,Object(D.a)(e,["field","form"]));return n.a.createElement("div",{className:"json-editor"},n.a.createElement("div",{title:r[t.name]&&""!==t.value&&!R(t.value)&&"Json not valid",className:r[t.name]&&""!==t.value&&!R(t.value)&&"not-valid"},n.a.createElement("textarea",Object.assign({},t,o))))},_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).onDeleteService=function(e){return function(){a.props.deleteService(a.props.project.id,e.id)}},a.onViewService=function(e){return function(){a.props.history.push("/"+a.props.project.id+"/services/"+e.id)}},a.updateServices=function(){a.props.updateServices(a.props.project.id)},a.changeRespWithError=function(e){return function(t){console.log("Cambio resp with error",e.id,t.target.value)}},a.onAddService=function(e,t){var r=t.setSubmitting;a.props.addService(a.props.project.id,e),e.description="",e.endpoint="",e.method="GET",e.successBody="",e.respError=!1,e.errorCode=500,e.errorBody="",r(!1)},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.updateServices(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,r=t.error,o=t.project,c=this.props.services.map(function(t,a){return n.a.createElement("li",{key:a},n.a.createElement("div",{className:"description"},t.description),n.a.createElement("div",{className:"method"},"".concat(t.method)),n.a.createElement("div",{className:"endpoint"},"/mocks/".concat(o.baseEndpoint,"/").concat(t.endpoint)),n.a.createElement("div",{className:"respError"},n.a.createElement("label",null,"Response with error",n.a.createElement("input",{type:"checkbox",checked:t.respError,onChange:e.changeRespWithError(t)}))),n.a.createElement("div",null,n.a.createElement("button",{onClick:e.onDeleteService(t)},"Delete")),n.a.createElement("div",null,n.a.createElement("button",{onClick:e.onViewService(t)},"Edit responses")))});return n.a.createElement("div",{className:"App"},n.a.createElement(b.c,{initialValues:{description:"",endpoint:"",method:"GET",successBody:"",respError:!1,errorCode:500,errorBody:""},validationSchema:P,onSubmit:this.onAddService},function(e){var t=e.isSubmitting,a=e.errors,r=e.touched;return n.a.createElement(b.b,null,n.a.createElement(b.a,{type:"text",name:"description",placeholder:"Project description",autoComplete:"off"}),a.description&&r.description?n.a.createElement("div",{className:"val-error"},a.description):null,n.a.createElement(b.a,{type:"text",name:"endpoint",placeholder:"Endpoint",autoComplete:"off"}),a.endpoint&&r.endpoint?n.a.createElement("div",{className:"val-error"},a.endpoint):null,n.a.createElement(b.a,{component:"select",name:"method",placeholder:"Method",autoComplete:"off"},n.a.createElement("option",{value:"GET"},"Get"),n.a.createElement("option",{value:"POST"},"Post"),n.a.createElement("option",{value:"DELETE"},"Delete"),n.a.createElement("option",{value:"PUT"},"Put")),a.method&&r.method?n.a.createElement("div",{className:"val-error"},a.method):null,n.a.createElement(b.a,{component:A,name:"successBody",placeholder:"Success body",autoComplete:"off"}),a.successBody&&r.successBody?n.a.createElement("div",{className:"val-error"},a.successBody):null,n.a.createElement(b.a,{type:"checkbox",name:"respError",placeholder:"Response with error",autoComplete:"off"}),a.respError&&r.respError?n.a.createElement("div",{className:"val-error"},a.respError):null,n.a.createElement(b.a,{type:"number",name:"errorCode",placeholder:"Error code",autoComplete:"off"}),a.errorCode&&r.errorCode?n.a.createElement("div",{className:"val-error"},a.errorCode):null,n.a.createElement(b.a,{component:A,name:"errorBody",placeholder:"Error body",autoComplete:"off"}),a.errorBody&&r.errorBody?n.a.createElement("div",{className:"val-error"},a.errorBody):null,n.a.createElement("button",{type:"submit",disabled:t},"Add service"),n.a.createElement("div",{className:"clearfix"}))}),n.a.createElement("button",{className:"refresh",onClick:this.updateServices},"Refresh"),n.a.createElement("div",{className:"clearfix"}),n.a.createElement("div",{className:"post-wrapper"},a&&n.a.createElement("div",{className:"loading"},n.a.createElement("div",{className:"lds-ripple"},n.a.createElement("div",null),n.a.createElement("div",null))),(c.length?n.a.createElement("ul",null,c):null)||!a&&n.a.createElement("h2",null,"No services"),n.a.createElement("div",{className:"clearfix"})),n.a.createElement("div",{className:"toast"+(r?" show":"")},n.a.createElement("div",{className:"img"},n.a.createElement("i",{className:"fas fa-exclamation-triangle"})),n.a.createElement("div",{className:"desc"},r)))}}]),t}(r.Component),L={updateServices:j,deleteService:function(e,t){return function(a){a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:e,loading:!0}}),fetch("/projects/"+e+"/services/"+t,{method:"DELETE"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(){a({type:"DELETE_SERVICE",payload:{idProject:e,idService:t}}),a(j())}).catch(function(){a(g("Errore inaspettato..."))}).finally(function(){a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:e,loading:!1}})})}},addService:function(e,t){return function(a){a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:e,loading:!0}}),fetch("/projects/"+e+"/services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(){a({type:"ADD_SERVICES",payload:{service:t,idProject:e}}),a(j(e))}).catch(function(){a(g("Errore inaspettato..."))}).finally(function(){a({type:"CHANGE_LOADING_SERVICES",payload:{idProject:e,loading:!1}})})}}},w=Object(d.b)(function(e,t){var a=e.projectData.projects.filter(function(e){return e.id===t.match.params.id}),r=[];return(a=a.length?a[0]:void 0)&&a.services&&(r=a.services),{project:a,services:r,loading:!!a&&a.loadingServices,error:e.appData.error}},L)(_),x=(a(674),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).changeFiled=function(e){console.log("Cambio resp with error",a.props.service.id,e.target.name,"checkbox"===e.target.type?e.target.checked:e.target.value)},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.match.params),this.props.updateServices(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.error,r=e.project,o=e.service;return n.a.createElement("div",{className:"App"},n.a.createElement("button",{className:"refresh",onClick:this.updateServices},"Refresh"),n.a.createElement("div",{className:"clearfix"}),n.a.createElement("div",{className:"post-wrapper"},t&&n.a.createElement("div",{className:"loading"},n.a.createElement("div",{className:"lds-ripple"},n.a.createElement("div",null),n.a.createElement("div",null))),o&&n.a.createElement("div",null,n.a.createElement("div",{className:"description"},o.description),n.a.createElement("div",{className:"method"},"".concat(o.method)),n.a.createElement("div",{className:"endpoint"},"/mocks/".concat(r.baseEndpoint,"/").concat(o.endpoint)),n.a.createElement("div",{className:"respError"},n.a.createElement("label",null,"Response with error",n.a.createElement("input",{type:"checkbox",value:o.respError,name:"respError",onChange:this.changeFiled}))),n.a.createElement("div",null,n.a.createElement("label",null,"Success response",n.a.createElement("textarea",{value:JSON.stringify(o.successBody),name:"successBody",onChange:this.changeFiled}))),n.a.createElement("div",null,n.a.createElement("label",null,"Error response",n.a.createElement("textarea",{value:JSON.stringify(o.errorBody),name:"errorBody",onChange:this.changeFiled}))),n.a.createElement("div",{className:"clearfix"}))),n.a.createElement("div",{className:"toast"+(a?" show":"")},n.a.createElement("div",{className:"img"},n.a.createElement("i",{className:"fas fa-exclamation-triangle"})),n.a.createElement("div",{className:"desc"},a)))}}]),t}(r.Component)),G={updateServices:j},k=Object(d.b)(function(e,t){var a=e.projectData.projects.filter(function(e){return e.id===t.match.params.id}),r=void 0;return(a=a.length?a[0]:void 0)&&a.services&&(r=(r=a.services.filter(function(e){return e.id===t.match.params.idService})).length?r[0]:void 0),{project:a,service:r}},G)(x),I=(a(675),N.object().shape({firstName:N.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),lastName:N.string().min(2,"Too Short!").max(50,"Too Long!").required("Required"),email:N.string().email("Invalid email").required("Required")})),B=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(v.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).onLogin=function(e,t){var r=t.setSubmitting;e.isLogged&&(e.firstName="",e.lastName="",e.email=""),e.isLogged=!e.isLogged,a.props.changeLoggedUser(e),r(!1)},a}return Object(f.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(b.c,{initialValues:this.props.loggedUser,validationSchema:I,onSubmit:this.onLogin},function(e){var t=e.values,a=e.isSubmitting,r=e.errors,o=e.touched;return n.a.createElement(b.b,null,n.a.createElement(b.a,Object.assign({type:"text",name:"firstName",placeholder:"First name",autocomplete:"off"},{readOnly:t.isLogged})),r.firstName&&o.firstName?n.a.createElement("div",{className:"val-error"},r.firstName):null,n.a.createElement(b.a,Object.assign({type:"text",name:"lastName",placeholder:"Last name",autocomplete:"off"},{readOnly:t.isLogged})),r.lastName&&o.lastName?n.a.createElement("div",{className:"val-error"},r.lastName):null,n.a.createElement(b.a,Object.assign({type:"email",name:"email",placeholder:"Email",autocomplete:"off"},{readOnly:t.isLogged})),r.email&&o.email?n.a.createElement("div",{className:"val-error"},r.email):null,!t.isLogged&&n.a.createElement("button",{type:"submit",disabled:a},"Login"),t.isLogged&&n.a.createElement("button",{type:"submit",disabled:a},"Logout"),n.a.createElement("div",{class:"clearfix"}))}))}}]),t}(r.Component),J={changeLoggedUser:function(e){return{type:"CHANGE_LOGGED_USER",payload:e}}},V=Object(d.b)(function(e,t){return{loggedUser:e.authData.loggedUser}},J)(B),H=a(103),q=Object(i.combineReducers)({authData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loggedUser:{firstName:"",lastName:"",email:"",isLogged:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_LOGGED_USER":return Object.assign({},e,{loggedUser:t.payload});default:return e}},projectData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{projects:[],loadingProjects:!1},t=arguments.length>1?arguments[1]:void 0,a=null;switch(t.type){case"UPDATE_PROJECTS":return Object.assign({},e,{projects:t.payload});case"ADD_SERVICES":var r=t.payload.service;return a=t.payload.idProject,Object.assign({},e,{projects:e.projects.map(function(e){return e.id===a?Object.assign({},e,{service:[].concat(Object(H.a)(e.service||[]),[r])}):e})});case"DELETE_SERVICE":var n=t.payload.idService;return a=t.payload.idProject,Object.assign({},e,{projects:e.projects.map(function(e){return e.id===a?Object.assign({},e,{service:Object(H.a)(e.service.filter(function(e){return e.id!==n}))}):e})});case"ADD_PROJECT":return Object.assign({},e,{projects:[t.payload].concat(Object(H.a)(e.projects||[]))});case"DELETE_PROJECTS":return Object.assign({},e,{projects:[t.payload].concat(Object(H.a)(e.projects.filter(function(e){return e.id===t.payload.idProject})||[]))});case"CHANGE_LOADING_PROJECTS":return Object.assign({},e,{loadingProjects:t.payload});case"CHANGE_LOADING_SERVICES":a=t.payload.idProject;var o=t.payload.loading;return Object.assign({},e,{projects:e.projects.map(function(e){return e.id===a?Object.assign({},e,{loadingServices:o}):e})});case"UPDATE_SERVICES":a=t.payload.idProject;var c=t.payload.services;return Object.assign({},e,{projects:e.projects.map(function(e){return e.id===a?Object.assign({},e,{services:c}):e})});default:return e}},appData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HTTP_ERROR":return Object.assign({},e,{error:t.payload});default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(676);var U=[p.a],M=Object(m.composeWithDevTools)({});var F=Object(i.createStore)(q,M(i.applyMiddleware.apply(void 0,U)));c.a.render(n.a.createElement(d.a,{store:F},n.a.createElement(l.a,null,n.a.createElement("nav",null,n.a.createElement("ul",null,n.a.createElement("li",{className:"brand"},n.a.createElement(l.b,{to:"/"},"Moki")),n.a.createElement("li",null,n.a.createElement(l.b,{to:"/"},"Projects")))),n.a.createElement("div",{className:"homepage"},n.a.createElement(s.a,{path:"/",exact:!0,component:T}),n.a.createElement(s.a,{path:"/:id",exact:!0,component:w}),n.a.createElement(s.a,{path:"/:id/services/:idService",exact:!0,component:k}),n.a.createElement(s.a,{path:"/profile",exact:!0,component:V})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[293,1,2]]]);
//# sourceMappingURL=main.99524428.chunk.js.map